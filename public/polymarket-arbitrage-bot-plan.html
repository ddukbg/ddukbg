<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Polymarket 차익거래(Arbitrage) 봇 구축을 위한 기술 분석 및 설계 - </title>
  <style>
    body {
      background-color: #008080; /* Teal */
      color: black;
      font-family: 'Tahoma', 'MS Sans Serif', sans-serif; /* Original Windows 98 fonts */ /* Windows 98 fonts only */
      font-size: 11px;
      margin: 0;
      padding: 0;
      /* NOTE: On mobile, 'overflow:hidden' prevents scrolling and breaks layout. */
      overflow-x: hidden;
      overflow-y: auto;
    }
    .win98-container {
      padding: 15px;
    }
    .win98-window {
      background-color: #c0c0c0; /* Silver */
      border-top: 2px solid #ffffff;
      border-left: 2px solid #ffffff;
      border-right: 2px solid #808080; /* Gray */
      border-bottom: 2px solid #808080;
      box-shadow: 1px 1px 0 #000000;
      display: flex;
      flex-direction: column;
      min-width: 300px;
      max-width: 800px; /* Desktop-friendly limit */
      width: calc(100vw - 30px);
      margin: 0 auto; /* Center */
    }
    .win98-titlebar {
      background: linear-gradient(to right, #000080, #1084d0); /* Navy to Blue gradient */
      color: white;
      padding: 3px 5px;
      font-weight: bold;
      display: flex;
      justify-content: space-between;
      align-items: center;
      height: 18px;
    }
    .win98-titlebar-text::before {
      content: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAPCAYAAAA71pVKAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAACGSURBVDhPY/z//z8DNwMDw8zAALyZgUE4//+hMMEAglgGJxAPkNwAEieAmAMRL679vxjAxH8gNvz/MFAMgokBAZgIA5j8/zAIFwQDX//8/yHz//8HY+A/FFp+//9/ZkDB//+D+B+I/P//f2KAwv+//w/E/0Hk////HxQCYOKDAgMDAwMArcUqD+3hWzQAAAAASUVORK5CYII='); /* Tiny icon */
      margin-right: 5px;
      vertical-align: middle;
    }
    .win98-controls button {
      background-color: #c0c0c0;
      border-top: 1px solid #ffffff;
      border-left: 1px solid #ffffff;
      border-right: 1px solid #808080;
      border-bottom: 1px solid #808080;
      width: 16px;
      height: 14px;
      font-family: 'Tahoma', 'MS Sans Serif', sans-serif; /* Original Windows 98 fonts */
      font-size: 10px;
      padding: 0;
      margin-left: 2px;
      line-height: 12px;
      text-align: center;
      cursor: default;
    }
    
    /* Explorer style layout */
    .explorer-layout {
      display: flex;
      flex-direction: column;
      max-height: calc(100vh - 150px); /* Set a max height to leave room for statusbar */
    }
    
    .explorer-header {
      display: flex;
      align-items: center;
      padding: 5px;
      border-bottom: 1px solid #808080;
    }
    
    .explorer-header-text {
      margin-left: 5px;
      font-weight: bold;
    }
    
    .explorer-body {
      display: flex;
      flex: 1;
      border: 1px solid #808080;
      margin: 3px;
      background-color: white;
      position: relative; /* Add relative positioning */
    }
    
    .explorer-sidebar {
      width: 180px;
      background-color: #c0c0c0;
      border-right: 2px solid #808080;
      overflow-y: auto;
      padding: 5px;
    }
    
    .explorer-sidebar-title {
      font-weight: bold;
      margin-bottom: 5px;
    }
    
    .explorer-sidebar-item {
      display: flex;
      align-items: center;
      margin: 3px 0;
      cursor: pointer;
      padding: 2px 4px;
    }
    
    .explorer-sidebar-item:hover {
      background-color: #000080; /* Navy blue */
      color: white;
    }
    
    .explorer-sidebar-item:active {
      background-color: #0000AA; /* Darker blue */
      color: white;
    }
    
    .explorer-sidebar-item::before {
      content: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAABRSURBVDhPY1hZWfEfA57///9/gJqGhoa/AxMDFQDEyMioAJE/MDAwMP7/n1iAIAMAwSIEEMUyQDgIKAZgRUMjIUMDAwMDw+Q/Q9wAEgAArHIHqcGD3XAAAAAASUVORK5CYII='); /* Folder icon */
      margin-right: 5px;
    }
    
    .explorer-content {
      flex: 1;
      overflow-y: auto;
      padding: 15px;
      padding-bottom: 60px; /* Add significant padding at bottom */
      max-height: calc(100vh - 180px);
    }
    
    /* Markdown content styling */
    .explorer-content h1, .explorer-content h2, .explorer-content h3 {
      margin-top: 1em;
      margin-bottom: 0.5em;
      font-weight: bold;
      font-family: 'Tahoma', 'MS Sans Serif', sans-serif; /* Original Windows 98 fonts */
    }
    .explorer-content h1 { font-size: 14px; }
    .explorer-content h2 { font-size: 13px; }
    .explorer-content h3 { font-size: 12px; }
    .explorer-content p { margin: 0.5em 0; line-height: 1.4; }
    .explorer-content ul, .explorer-content ol {
      padding-left: 20px;
      margin: 0.5em 0;
    }
    .explorer-content li {
      margin-bottom: 3px;
    }
    .explorer-content img {
      max-width: 100%;
      border: 1px solid #808080;
    }
    .explorer-content code {
      font-family: 'Tahoma', 'MS Sans Serif', sans-serif; /* Original Windows 98 fonts */
      background-color: #e0e0e0; /* Slightly different gray */
      padding: 0.1em 0.3em;
      border: 1px solid #b0b0b0;
      font-size: 0.95em;
    }
    .explorer-content pre {
      font-family: 'Tahoma', 'MS Sans Serif', sans-serif; /* Original Windows 98 fonts */
      background-color: #ffffff; /* White background like notepad */
      border: 1px solid #808080; /* Simple gray border */
      padding: 10px;
      margin: 1em 0;
      overflow-x: auto;
      white-space: pre;
      font-size: 1em; /* Reset pre font size */
    }
    .explorer-content pre code {
      background-color: transparent;
      border: none;
      padding: 0;
    }
    .explorer-content blockquote {
      border: 1px solid #808080;
      border-left: 5px solid #000080; /* Navy blue left border */
      padding: 10px 15px;
      margin: 1em 0;
      color: #333;
      background-color: #f8f8f8;
    }
    .explorer-content hr {
      border: none;
      border-top: 1px solid #808080; /* Gray top */
      border-bottom: 1px solid #ffffff; /* White bottom */
      height: 2px;
      margin: 1em 0;
    }
    
    .explorer-content table {
      border-collapse: collapse;
      width: 100%;
      margin: 1em 0;
    }
    
    .explorer-content th, .explorer-content td {
      border: 1px solid #808080;
      padding: 4px 8px;
    }
    
    .explorer-content th {
      background-color: #d0d0d0;
      font-weight: bold;
    }
    
    /* Links like Windows 98 */
    .explorer-content a {
      color: #0000ff;
      text-decoration: underline;
      display: inline-block; /* Allow margin to be applied */
      margin-bottom: 5px; /* Add space below links */
    }
    
    /* Add specific styling for navigation links at bottom of page */
    .explorer-content a[href="/"], .explorer-content a:contains("Home"), .explorer-content a:contains("Back") {
      margin-bottom: 30px; /* Extra margin for navigation links */
    }
    
    .explorer-content a:visited {
      color: #800080;
    }
    
    .explorer-content a:hover {
      color: #ff0000;
    }
    
    .win98-statusbar {
      background-color: #c0c0c0;
      border-top: 1px solid #808080;
      border-left: 1px solid #808080;
      border-right: 1px solid #ffffff;
      border-bottom: 1px solid #ffffff;
      padding: 2px 5px;
      height: 18px;
      display: flex;
    }
    .win98-statusbar-panel {
      border-top: 1px solid #808080;
      border-left: 1px solid #808080;
      border-right: 1px solid #ffffff;
      border-bottom: 1px solid #ffffff;
      padding: 0 5px;
      margin-right: 2px;
      flex-grow: 1;
      overflow: hidden;
      white-space: nowrap;
      text-overflow: ellipsis; /* Add ellipsis for text overflow */
      max-width: 100%; /* Ensure content stays within container */
    }
    /* Windows 98 Button Style */
    .win98-button {
      display: inline-block;
      background-color: #c0c0c0;
      color: #000;
      border-top: 1px solid #ffffff;
      border-left: 1px solid #ffffff;
      border-right: 1px solid #808080;
      border-bottom: 1px solid #808080;
      padding: 3px 8px;
      margin: 2px;
      text-decoration: none;
      font-size: 11px;
      cursor: pointer;
      box-shadow: 1px 1px 0 #000000;
    }
    .win98-button:hover {
      background-color: #d0d0d0;
    }
    .win98-button:active {
      background-color: #b0b0b0;
      border-top: 1px solid #808080;
      border-left: 1px solid #808080;
      border-right: 1px solid #ffffff;
      border-bottom: 1px solid #ffffff;
      box-shadow: none;
    }

    /* Mobile / small screens */
    @media (max-width: 640px) {
      body {
        font-size: 12px;
      }
      .win98-container {
        padding: 10px;
      }
      .win98-window {
        width: calc(100vw - 20px);
        max-width: none;
        min-width: 0;
      }
      .explorer-layout {
        max-height: none;
      }
      .explorer-body {
        flex-direction: column;
      }
      .explorer-sidebar {
        width: auto;
        border-right: none;
        border-bottom: 2px solid #808080;
      }
    }
  
    /* StyleMD watermark */
    .stylemd-watermark {
      position: fixed;
      right: 10px;
      bottom: 10px;
      font-size: 10px;
      opacity: 0.5;
      color: #777;
      z-index: 100;
      pointer-events: none;
    }
    .stylemd-watermark a {
      color: inherit;
      text-decoration: none;
    }
  </style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js/styles/default.min.css"><script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script><script>mermaid.initialize({ startOnLoad: true, securityLevel: "loose" });</script><script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script><script>MathJax = { tex: { inlineMath: [["$", "$"]], displayMath: [["$", "$"]] } };</script></head>
<body>
  <div class="win98-container">
    <div class="win98-window">
      <div class="win98-titlebar">
        <span class="win98-titlebar-text">My Document</span>
        <div class="win98-controls">
          <button title="Minimize">_</button>
          <button title="Maximize">&#9633;</button>
          <button title="Close">X</button>
        </div>
      </div>
      
      <div class="explorer-layout">
        <div class="explorer-header">
          <span class="explorer-header-text">My Blog</span>
        </div>
        
        <div class="explorer-body">
          <div class="explorer-sidebar">
            <div class="explorer-sidebar-title">Directories</div>
            <div class="explorer-sidebar-item">pages</div>
            <div class="explorer-sidebar-item">content</div>
          </div>
          
          <div class="explorer-content">
            <header>
    <h1>Polymarket 차익거래(Arbitrage) 봇 구축을 위한 기술 분석 및 설계</h1>
    <p><small>2026-02-12 10:00 AM</small></p>
    <nav class="nav-links">
      <a href="index.html" class="win98-button">Home</a>
        <a href="about.html" class="win98-button">About</a>
    </nav>
  </header>
    <h1 id="polymarket-arbitrage-"><a href="#polymarket-arbitrage-" class="header-anchor"></a>Polymarket 차익거래(Arbitrage) 봇 구축: 기술 분석부터 설계까지</h1><p>최근 예측 시장(Prediction Market)인 <strong>Polymarket</strong>의 거래량이 폭발적으로 증가했습니다. 단순한 도박을 넘어, 금융 상품으로서의 성격이 짙어지면서 필연적으로 <strong>차익거래(Arbitrage)</strong> 기회가 발생하고 있습니다.</p>
<p>이 글에서는 Polymarket의 기술적 기반인 <strong>Gnosis CTF(Conditional Tokens Framework)</strong> 메커니즘을 심층 분석하여 차익거래 원리를 파악하고, 이를 자동화할 <strong>HFT(High Frequency Trading) 봇</strong>의 설계 계획을 정리합니다.</p>
<hr>
<h2 id="1-ctf-atomic-arbitrage"><a href="#1-ctf-atomic-arbitrage" class="header-anchor"></a>1. 핵심 원리: CTF와 Atomic Arbitrage</h2><p>Polymarket은 단순한 베팅 사이트가 아닙니다. 이더리움(Polygon) 상의 스마트 컨트랙트인 <strong>CTF(Conditional Tokens Framework)</strong> 위에서 작동합니다.</p>
<h3 id="split-amp-merge-"><a href="#split-amp-merge-" class="header-anchor"></a>Split &amp; Merge 메커니즘</h3><p>모든 마켓은 **담보(Collateral, 주로 USDC)**를 기반으로 파생된 토큰을 거래합니다.</p>
<ul>
<li><strong>Split (발행)</strong>: 1 USDC를 락업하면, 모든 가능한 결과(예: Yes + No)의 토큰을 각각 1개씩 받습니다.<ul>
<li><code>1 USDC → 1 Yes Token + 1 No Token</code></li>
</ul>
</li>
<li><strong>Merge (상환)</strong>: 모든 결과의 토큰을 1개씩 모아서 가져오면, 다시 1 USDC로 바꿀 수 있습니다.<ul>
<li><code>1 Yes Token + 1 No Token → 1 USDC</code></li>
</ul>
</li>
</ul>
<h3 id="-the-opportunity-"><a href="#-the-opportunity-" class="header-anchor"></a>차익거래 기회 (The Opportunity)</h3><p>이 메커니즘 덕분에, 시장 가격의 합이 **1$**와 다를 때 무위험 차익거래가 가능합니다.</p>
<ol>
<li><strong>Minting Arb (가격 합 &gt; 1$)</strong><ul>
<li>시장에서 Yes가 $0.6, No가 $0.5에 거래된다고 가정 (합 $1.1)</li>
<li><strong>전략</strong>: 1 USDC로 (Yes+No)를 Minting → 시장에 각각 매도 → $1.1 수익 (ROI 10%)</li>
</ul>
</li>
<li><strong>Burn/Redeem Arb (가격 합 &lt; 1$)</strong><ul>
<li>시장에서 Yes가 $0.4, No가 $0.5에 거래된다고 가정 (합 $0.9)</li>
<li><strong>전략</strong>: 시장에서 Yes, No를 각각 매수($0.9 소요) → Merge하여 1 USDC 상환 → $0.1 수익</li>
</ul>
</li>
</ol>
<blockquote>
<p><strong>현실적인 제약</strong>: Polymarket은 오더북(CLOB) 기반이므로, <strong>Taker Fee</strong>와 <strong>Slippage</strong>를 고려해야 합니다. 따라서 <code>(Price_Yes + Price_No + Fees) &lt; 1.0</code> 인 순간을 포착하는 것이 핵심입니다.</p>
</blockquote>
<hr>
<h2 id="2-bot-strategy-"><a href="#2-bot-strategy-" class="header-anchor"></a>2. 봇 구축 전략 (Bot Strategy)</h2><p>단순한 스크립트로는 경쟁력이 없습니다. 오더북의 갭을 밀리초(ms) 단위로 캐치해야 합니다.</p>
<h3 id="-negative-risk-arbitrage"><a href="#-negative-risk-arbitrage" class="header-anchor"></a>타겟 전략: Negative Risk Arbitrage</h3><p>최근 Polymarket은 여러 결과 중 하나만 실현되는(Mutually Exclusive) <strong>Negative Risk</strong> 마켓을 지원합니다. (예: &quot;공화당 후보는 누구?&quot; - 트럼프/헤일리/디샌티스 등)</p>
<ul>
<li><strong>기회</strong>: 10명의 후보가 있을 때, 각 후보 토큰 가격의 합이 $0.95라면?</li>
<li><strong>액션</strong>: 10개 토큰을 전부 시장가 매수 → Merge → 5% 확정 수익.</li>
<li><strong>난이도</strong>: 슬리피지 계산과 Execution 속도가 생명.</li>
</ul>
<hr>
<h2 id="3--2"><a href="#3--2" class="header-anchor"></a>3. 시스템 아키텍처 설계</h2><p>이 봇은 안정성과 속도를 위해 <strong>Python</strong> 기반의 비동기 마이크로서비스 아키텍처로 설계합니다.</p>
<h3 id="tech-stack"><a href="#tech-stack" class="header-anchor"></a>Tech Stack</h3><ul>
<li><strong>Language</strong>: Python 3.11+ (<code>asyncio</code>)</li>
<li><strong>SDK</strong>: <code>py-clob-client</code> (Polymarket 공식 CLOB 클라이언트)</li>
<li><strong>Chain</strong>: Polygon RPC (Alchemy/Infura) - <em>CTF Mint/Redeem용</em></li>
<li><strong>DB</strong>: TimescaleDB (틱 데이터 저장 및 백테스팅)</li>
</ul>
<h3 id="architecture-diagram"><a href="#architecture-diagram" class="header-anchor"></a>Architecture Diagram</h3><p><img src="https://raw.githubusercontent.com/ddukbg/ddukbg/refs/heads/main/images/polymarket-bot-arch.png" alt="Polymarket Bot Architecture"></p>
<ol>
<li><strong>Market Data Service</strong>: CLOB Websocket을 통해 수천 개 마켓의 오더북(L2 Data)을 실시간 수신.</li>
<li><strong>Strategy Engine</strong>: 메모리 내에서 <code>Sum(Ask_Prices)</code>를 계산. 임계값(예: 0.99) 이하로 떨어지면 트리거.</li>
<li><strong>Risk Manager</strong>: 현재 잔고(USDC)와 가스비를 고려해 진입 가능 여부 판단.</li>
<li><strong>Execution Service</strong>:<ul>
<li><strong>Atomic Transaction</strong>이 중요. 매수 후 즉시 Merge가 불가능할 수 있음(포지션 홀딩 리스크).</li>
<li>1단계: CLOB API로 토큰 매수 (Fill or Kill)</li>
<li>2단계: CTF 컨트랙트 호출 (Merge/Redeem)</li>
</ul>
</li>
</ol>
<hr>
<h2 id="4-roadmap-"><a href="#4-roadmap-" class="header-anchor"></a>4. 운영 계획 (Roadmap)</h2><h3 id="phase-1-paper-trading-"><a href="#phase-1-paper-trading-" class="header-anchor"></a>Phase 1: Paper Trading (모의 투자)</h3><ul>
<li>실제 자금 투입 없이, 실시간 데이터만 수신하며 <code>가상 체결</code> 시뮬레이션.</li>
<li>슬리피지와 수수료를 보수적으로 적용하여 수익성 검증.</li>
</ul>
<h3 id="phase-2-live-trading-small-cap-"><a href="#phase-2-live-trading-small-cap-" class="header-anchor"></a>Phase 2: Live Trading (Small Cap)</h3><ul>
<li><strong>뱅크롤</strong>: 100 USDC</li>
<li><strong>대상</strong>: 유동성이 적어 스프레드가 큰 롱테일 마켓(정치 외 이슈 등).</li>
<li><strong>목표</strong>: 일일 승률 90% 이상, MDD(Maximum Drawdown) 1% 미만.</li>
</ul>
<h3 id="phase-3-scaling-amp-optimization"><a href="#phase-3-scaling-amp-optimization" class="header-anchor"></a>Phase 3: Scaling &amp; Optimization</h3><ul>
<li>Rust로 코어 로직 포팅 고려 (Latency 단축).</li>
<li>Polygon 노드 직접 운영 (RPC 레이턴시 최소화).</li>
</ul>
<hr>
<h2 id="--129"><a href="#--129" class="header-anchor"></a>결론</h2><p>Polymarket 차익거래는 단순한 코딩이 아니라, <strong>블록체인 메커니즘(CTF)과 전통적 HFT(CLOB)의 결합</strong>입니다. 시장 효율성이 높아질수록 기회는 줄어들겠지만, 틈새 시장(Long-tail Markets)에는 여전히 기회가 있습니다.</p>
<p>다음 글에서는 실제 **Python 봇 코드의 핵심 파트(CLOB 연동, 시세 포착 로직)**를 공개하고, 모의 투자 성과를 공유하겠습니다.</p>

            <div style="height: 50px;"></div>
          </div>
        </div>
      </div>
      
      <div class="win98-statusbar">
        <div class="win98-statusbar-panel" style="text-overflow: ellipsis; white-space: nowrap; overflow: hidden;">Ready</div>
      </div>
    </div>
  </div>
  <div class="stylemd-watermark">Made with <a href="https://github.com/ddukbg/stylemd">StyleMD</a></div>
</body>
</html> 